(()=>{var e={};e.id=652,e.ids=[652],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},5750:(e,t,s)=>{"use strict";function r(){return null}s.r(t),s.d(t,{default:()=>r})},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},16771:(e,t,s)=>{"use strict";s.d(t,{AgentUI:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call AgentUI() from the server but AgentUI is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/components/agent/AgentUI.tsx","AgentUI")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21342:(e,t,s)=>{"use strict";s.d(t,{Hr:()=>h,Ht:()=>p,SQ:()=>m,_2:()=>f,lp:()=>x,mB:()=>g,rI:()=>c,ty:()=>u});var r=s(60687),a=s(43210),n=s(12325),i=s(74158),l=s(58450),o=s(73256),d=s(4780);let c=n.bL,u=n.l9;n.YJ,n.ZL,n.Pb;let h=n.z6;a.forwardRef(({className:e,inset:t,children:s,...a},l)=>(0,r.jsxs)(n.ZP,{ref:l,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...a,children:[s,(0,r.jsx)(i.A,{className:"ml-auto"})]})).displayName=n.ZP.displayName,a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.G5,{ref:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=n.G5.displayName;let m=a.forwardRef(({className:e,sideOffset:t=4,...s},a)=>(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{ref:a,sideOffset:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));m.displayName=n.UC.displayName;let f=a.forwardRef(({className:e,inset:t,...s},a)=>(0,r.jsx)(n.q7,{ref:a,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s}));f.displayName=n.q7.displayName,a.forwardRef(({className:e,children:t,checked:s,...a},i)=>(0,r.jsxs)(n.H_,{ref:i,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),t]})).displayName=n.H_.displayName;let p=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(n.hN,{ref:a,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),t]}));p.displayName=n.hN.displayName;let x=a.forwardRef(({className:e,inset:t,...s},a)=>(0,r.jsx)(n.JU,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));x.displayName=n.JU.displayName;let g=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));g.displayName=n.wv.displayName},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28784:(e,t,s)=>{"use strict";s.d(t,{AgentUI:()=>sj});var r,a=s(60687),n=s(43210),i=s(85665),l=s(24310);async function o(e,t){let s=await l.Z.getSessionUpdates(e);s&&t(t=>({sessions:t.sessions.map(t=>t.id===e?s:t)}))}let d=(0,i.vt)((e,t)=>({agent:null,sessions:[],customers:[],settings:null,activeSessionId:null,isLoading:!1,isExtendingKey:!1,error:null,key:null,shouldInvalidateAliases:!1,fetchAgentData:async t=>{e({isLoading:!0});try{let s=await l.Z.getAgentData(t);s&&e({agent:s.agent,sessions:s.sessions,customers:s.customers,settings:s.settings,key:s.key,isLoading:!1,activeSessionId:s.sessions.find(e=>"active"===e.status)?.id||s.sessions.find(e=>"pending"===e.status)?.id||null})}catch(t){e({error:t instanceof Error?t.message:"Failed to fetch agent data",isLoading:!1})}},setActiveSessionId:s=>{let r=t().sessions.find(e=>e.id===s)?.customerId;if(r&&t().settings?.blockedIps.includes(t().customers.find(e=>e.id===r)?.ipAddress||""))return void e({activeSessionId:s,error:"This customer is blocked."});e({activeSessionId:s,error:null})},sendMessage:async(s,r)=>{let a={id:"",...r,sender:"agent",timestamp:new Date().toISOString(),agentId:t().agent?.id};await l.Z.sendMessage(s,a),await o(s,e)},updateStatus:async(t,s)=>{let r=await l.Z.updateAgentStatus(t,s);r&&e({agent:r})},updateProfile:async(t,s)=>{let r=await l.Z.updateAgentProfile(t,s);r&&e({agent:r})},updateSettings:async(t,s)=>{let r=await l.Z.updateAgentSettings(t,s);r&&e({settings:r})},pollSessionUpdates:async t=>{await o(t,e)},extendKey:async(t,s)=>{e({isExtendingKey:!0,error:null});try{let r=await l.Z.extendAgentKey(t,s);if(r)return e({key:r,isExtendingKey:!1,shouldInvalidateAliases:!0}),!0;return e({isExtendingKey:!1}),!1}catch(t){return e({error:t instanceof Error?t.message:"Failed to extend key",isExtendingKey:!1}),!1}},blockCustomer:t=>{e(e=>{if(!e.settings||e.settings.blockedIps.includes(t))return{};let s={...e.settings,blockedIps:[...e.settings.blockedIps,t]};return l.Z.updateAgentSettings(e.agent.id,s),{settings:s}})},unblockCustomer:t=>{e(e=>{if(!e.settings)return{};let s={...e.settings,blockedIps:e.settings.blockedIps.filter(e=>e!==t)};return l.Z.updateAgentSettings(e.agent.id,s),{settings:s}})},deleteCustomer:t=>{e(e=>{let s=e.sessions.filter(e=>e.customerId===t).map(e=>e.id),r=e.sessions.filter(e=>e.customerId!==t),a=e.customers.filter(e=>e.id!==t),n=e.activeSessionId;return s.includes(e.activeSessionId||"")&&(n=r[0]?.id||null),l.Z.deleteCustomer(t),{sessions:r,customers:a,activeSessionId:n}})},archiveSession:async t=>{let s=await l.Z.updateSessionStatus(t,"archived");s&&e(e=>{let r=e.sessions.filter(e=>"archived"!==e.status&&e.id!==t);return{sessions:e.sessions.map(e=>e.id===t?s:e),activeSessionId:r[0]?.id||null}})},unarchiveSession:async t=>{let s=await l.Z.updateSessionStatus(t,"active");s&&e(e=>({sessions:e.sessions.map(e=>e.id===t?s:e),activeSessionId:t}))},sendFileMessage:async(s,r)=>{let a=t().agent?.id;if(!a)return;let n={type:"file",sender:"agent",agentId:a,timestamp:new Date().toISOString(),file:{name:r.name,size:r.size,progress:0}},i=await l.Z.sendMessage(s,n);e(e=>({sessions:e.sessions.map(e=>e.id===s?{...e,messages:[...e.messages,i]}:e)}));let o=setInterval(()=>{e(e=>{let t=e.sessions.find(e=>e.id===s);if(!t)return clearInterval(o),e;let r=t.messages.find(e=>e.id===i.id);if(!r)return clearInterval(o),e;let a=Math.min(r.file.progress+25*Math.random(),100),n={...r,file:{...r.file,progress:a}};return a>=100&&clearInterval(o),{...e,sessions:e.sessions.map(e=>e.id===s?{...e,messages:e.messages.map(e=>e.id===i.id?n:e)}:e)}})},500)},invalidateAliases:()=>e({shouldInvalidateAliases:!0}),aliasesInvalidated:()=>e({shouldInvalidateAliases:!1})}));var c=s(41347),u=s(32584),h=s(4780),m=s(35780),f=s(47138);function p(e,t){let s=(0,f.a)(e),r=(0,f.a)(t),a=s.getTime()-r.getTime();return a<0?-1:a>0?1:a}var x=s(11392),g=s(20755),v=s(9903),y=s(79943);function j(e,t){return function(e,t,s){let r,a,n,i=(0,v.q)(),l=s?.locale??i.locale??g.c,o=p(e,t);if(isNaN(o))throw RangeError("Invalid time value");let d=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:o});o>0?(r=(0,f.a)(t),a=(0,f.a)(e)):(r=(0,f.a)(e),a=(0,f.a)(t));let c=function(e,t,s){var r;return(r=void 0,e=>{let t=(r?Math[r]:Math.trunc)(e);return 0===t?0:t})(((0,f.a)(e)-(0,f.a)(t))/1e3)}(a,r),u=Math.round((c-((0,y.G)(a)-(0,y.G)(r))/1e3)/60);if(u<2)if(s?.includeSeconds)if(c<5)return l.formatDistance("lessThanXSeconds",5,d);else if(c<10)return l.formatDistance("lessThanXSeconds",10,d);else if(c<20)return l.formatDistance("lessThanXSeconds",20,d);else if(c<40)return l.formatDistance("halfAMinute",0,d);else if(c<60)return l.formatDistance("lessThanXMinutes",1,d);else return l.formatDistance("xMinutes",1,d);else if(0===u)return l.formatDistance("lessThanXMinutes",1,d);else return l.formatDistance("xMinutes",u,d);if(u<45)return l.formatDistance("xMinutes",u,d);if(u<90)return l.formatDistance("aboutXHours",1,d);if(u<x.F6){let e=Math.round(u/60);return l.formatDistance("aboutXHours",e,d)}if(u<2520)return l.formatDistance("xDays",1,d);else if(u<x.Nw){let e=Math.round(u/x.F6);return l.formatDistance("xDays",e,d)}else if(u<2*x.Nw)return n=Math.round(u/x.Nw),l.formatDistance("aboutXMonths",n,d);if((n=function(e,t){let s,r=(0,f.a)(e),a=(0,f.a)(t),n=p(r,a),i=Math.abs(function(e,t){let s=(0,f.a)(e),r=(0,f.a)(t);return 12*(s.getFullYear()-r.getFullYear())+(s.getMonth()-r.getMonth())}(r,a));if(i<1)s=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*i);let t=p(r,a)===-n;(function(e){let t=(0,f.a)(e);return+function(e){let t=(0,f.a)(e);return t.setHours(23,59,59,999),t}(t)==+function(e){let t=(0,f.a)(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}(t)})((0,f.a)(e))&&1===i&&1===p(e,a)&&(t=!1),s=n*(i-Number(t))}return 0===s?0:s}(a,r))<12){let e=Math.round(u/x.Nw);return l.formatDistance("xMonths",e,d)}{let e=n%12,t=Math.trunc(n/12);return e<3?l.formatDistance("aboutXYears",t,d):e<9?l.formatDistance("overXYears",t,d):l.formatDistance("almostXYears",t+1,d)}}(e,(0,m.w)(e,Date.now()),t)}var b=s(52595),N=s(82614);let w=(0,N.A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var k=s(58595);let C=(0,N.A)("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]),A=(0,N.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var M=s(55924),R=s(21342);let E=(0,N.A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),P=(0,N.A)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),I=(0,N.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),S=(0,N.A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var D=s(58369),z=s(49497),_=s(63503),F=s(70569),q=s(11273),O=s(72942),L=s(46059),T=s(3416),H=s(43),B=s(65551),$=s(96963),V="Tabs",[U,G]=(0,q.A)(V,[O.RG]),Z=(0,O.RG)(),[K,X]=U(V),Y=n.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:d="automatic",...c}=e,u=(0,H.jH)(o),[h,m]=(0,B.i)({prop:r,onChange:n,defaultProp:i});return(0,a.jsx)(K,{scope:s,baseId:(0,$.B)(),value:h,onValueChange:m,orientation:l,dir:u,activationMode:d,children:(0,a.jsx)(T.sG.div,{dir:u,"data-orientation":l,...c,ref:t})})});Y.displayName=V;var Q="TabsList",W=n.forwardRef((e,t)=>{let{__scopeTabs:s,loop:r=!0,...n}=e,i=X(Q,s),l=Z(s);return(0,a.jsx)(O.bL,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:(0,a.jsx)(T.sG.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});W.displayName=Q;var J="TabsTrigger",ee=n.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,disabled:n=!1,...i}=e,l=X(J,s),o=Z(s),d=er(l.baseId,r),c=ea(l.baseId,r),u=r===l.value;return(0,a.jsx)(O.q7,{asChild:!0,...o,focusable:!n,active:u,children:(0,a.jsx)(T.sG.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...i,ref:t,onMouseDown:(0,F.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(r)}),onKeyDown:(0,F.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(r)}),onFocus:(0,F.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;u||n||!e||l.onValueChange(r)})})})});ee.displayName=J;var et="TabsContent",es=n.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,forceMount:i,children:l,...o}=e,d=X(et,s),c=er(d.baseId,r),u=ea(d.baseId,r),h=r===d.value,m=n.useRef(h);return n.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(L.C,{present:i||h,children:({present:s})=>(0,a.jsx)(T.sG.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":c,hidden:!s,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:s&&l})})});function er(e,t){return`${e}-trigger-${t}`}function ea(e,t){return`${e}-content-${t}`}es.displayName=et;let en=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(W,{ref:s,className:(0,h.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));en.displayName=W.displayName;let ei=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(ee,{ref:s,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ei.displayName=ee.displayName;let el=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(es,{ref:s,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));el.displayName=es.displayName;var eo=s(54300),ed=s(89667),ec=s(29523),eu=s(34729),eh=s(29867);let em=(0,N.A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ef=(0,N.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var ep=s(35137),ex=s(5068),eg=s(35265),ev=s(59824),ey=s(11516),ej=s(58261),eb=s(98599),eN=s(83721),ew=s(18853),ek="Switch",[eC,eA]=(0,q.A)(ek),[eM,eR]=eC(ek),eE=n.forwardRef((e,t)=>{let{__scopeSwitch:s,name:r,checked:i,defaultChecked:l,required:o,disabled:d,value:c="on",onCheckedChange:u,form:h,...m}=e,[f,p]=n.useState(null),x=(0,eb.s)(t,e=>p(e)),g=n.useRef(!1),v=!f||h||!!f.closest("form"),[y=!1,j]=(0,B.i)({prop:i,defaultProp:l,onChange:u});return(0,a.jsxs)(eM,{scope:s,checked:y,disabled:d,children:[(0,a.jsx)(T.sG.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":eD(y),"data-disabled":d?"":void 0,disabled:d,value:c,...m,ref:x,onClick:(0,F.m)(e.onClick,e=>{j(e=>!e),v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),v&&(0,a.jsx)(eS,{control:f,bubbles:!g.current,name:r,value:c,checked:y,required:o,disabled:d,form:h,style:{transform:"translateX(-100%)"}})]})});eE.displayName=ek;var eP="SwitchThumb",eI=n.forwardRef((e,t)=>{let{__scopeSwitch:s,...r}=e,n=eR(eP,s);return(0,a.jsx)(T.sG.span,{"data-state":eD(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:t})});eI.displayName=eP;var eS=e=>{let{control:t,checked:s,bubbles:r=!0,...i}=e,l=n.useRef(null),o=(0,eN.Z)(s),d=(0,ew.X)(t);return n.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&t){let a=new Event("click",{bubbles:r});t.call(e,s),e.dispatchEvent(a)}},[o,s,r]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eD(e){return e?"checked":"unchecked"}let ez=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(eE,{className:(0,h.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:(0,a.jsx)(eI,{className:(0,h.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ez.displayName=eE.displayName;var e_=s(91821);function eF({isOpen:e,setIsOpen:t}){let{agent:s,settings:r,key:i,updateProfile:l,updateSettings:o,extendKey:u,isExtendingKey:h,error:m,invalidateAliases:f}=d(),{updateCurrentUser:p}=(0,c.n)(),{toast:x}=(0,eh.dj)(),[g,v]=(0,n.useState)(s?.name||""),[y,N]=(0,n.useState)(["",""]),[w,k]=(0,n.useState)([]),[C,A]=(0,n.useState)(!0),[M,R]=(0,n.useState)(""),[E,P]=(0,n.useState)(null),I=(0,n.useRef)(null);if(!s)return null;let S=async()=>{await l(s.id,{name:g}),p({name:g}),x({title:"个人资料已更新",description:"您的显示名称已更改。"})},D=async()=>{let e=`https://i.pravatar.cc/150?u=${Date.now()}`;await l(s.id,{avatar:e}),p({avatar:e}),x({title:"头像已更新",description:"已生成新的随机头像。"})},z=async()=>{let e=y.filter(e=>""!==e.trim()),t=w.filter(e=>""!==e.shortcut.trim()&&""!==e.message.trim()),a={...r,welcomeMessages:e,quickReplies:t};await o(s.id,a),x({title:"设置已保存",description:"您的聊天设置已更新。"}),P(null)},F=(e,t,s)=>{k(r=>r.map(r=>r.id===e?{...r,[t]:s}:r))},q=e=>{k(t=>t.filter(t=>t.id!==e))},O=async()=>{M.trim()&&s&&(await u(s.id,M)?(x({title:"密钥已更换",description:"坐席已成功绑定新密钥。旧分享链接已失效，请重新生成。"}),f(),R("")):x({title:"更换失败",description:m||"无法使用该密钥。请检查密钥是否正确、未绑定且为坐席角色。",variant:"destructive"}))},L=e=>{0!==e&&k(t=>{let s=[...t],r=s[e];return s[e]=s[e-1],s[e-1]=r,s})};return(0,a.jsx)(_.lG,{open:e,onOpenChange:t,children:(0,a.jsxs)(_.Cf,{className:"max-w-2xl",children:[(0,a.jsxs)(_.c7,{children:[(0,a.jsx)(_.L3,{children:"坐席设置"}),(0,a.jsx)(_.rr,{children:"管理您的个人资料和聊天设置。"})]}),(0,a.jsxs)(Y,{defaultValue:"profile",children:[(0,a.jsxs)(en,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(ei,{value:"profile",children:"个人资料"}),(0,a.jsx)(ei,{value:"chat",children:"聊天设置"}),(0,a.jsx)(ei,{value:"key",children:"密钥管理"})]}),(0,a.jsxs)(el,{value:"profile",className:"p-1",children:[(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eo.J,{htmlFor:"name",children:"显示名称"}),(0,a.jsx)(ed.p,{id:"name",value:g,onChange:e=>v(e.target.value)})]}),(0,a.jsx)(ec.$,{onClick:S,children:"保存名称"})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eo.J,{children:"头像"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"上传您自己的头像或生成一个随机头像。"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ec.$,{onClick:()=>{I.current?.click()},children:"上传头像"}),(0,a.jsx)(ec.$,{variant:"outline",onClick:D,children:"生成随机头像"})]}),(0,a.jsx)("input",{type:"file",ref:I,onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=async()=>{let t=e.result;await l(s.id,{avatar:t}),p({avatar:t}),x({title:"头像已更新",description:"您的头像已成功上传。"})},e.readAsDataURL(t)}},className:"hidden",accept:"image/*"})]})})]}),(0,a.jsxs)(el,{value:"chat",className:"p-1",children:[(0,a.jsxs)("div",{className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eo.J,{children:"欢迎消息"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"设置一或两条欢迎语，它们将依次发送给访客。"}),(0,a.jsx)(eu.T,{value:y[0],onChange:e=>N([e.target.value,y[1]]),placeholder:"第一条欢迎消息 (必填)"}),(0,a.jsx)(eu.T,{value:y[1],onChange:e=>N([y[0],e.target.value]),placeholder:"第二条欢迎消息 (可选，将在3秒后发送)"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(eo.J,{children:"快捷回复"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"输入您的常用语录，方便快速回复。"})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:w.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center gap-2 p-2 rounded-md border bg-background",children:E===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.$,{disabled:!0,variant:"ghost",size:"icon",className:"h-8 w-8 cursor-default",children:(0,a.jsx)(em,{className:"h-4 w-4"})}),(0,a.jsx)(ed.p,{placeholder:"快捷指令",value:e.shortcut,onChange:t=>F(e.id,"shortcut",t.target.value),className:"w-28"}),(0,a.jsx)(ed.p,{placeholder:"快捷回复内容",className:"flex-1",value:e.message,onChange:t=>F(e.id,"message",t.target.value)}),(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",onClick:()=>P(null),children:(0,a.jsx)(ef,{className:"h-4 w-4 text-primary"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",onClick:()=>L(t),className:"h-8 w-8",disabled:0===t,children:(0,a.jsx)(em,{className:"h-4 w-4"})}),(0,a.jsx)("code",{className:"px-2 py-1 bg-muted rounded-md text-sm font-semibold w-28 text-center truncate",children:e.shortcut}),(0,a.jsx)("p",{className:"flex-1 text-sm text-muted-foreground truncate",children:e.message}),(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",onClick:()=>P(e.id),children:(0,a.jsx)(ep.A,{className:"h-4 w-4"})}),(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",onClick:()=>q(e.id),children:(0,a.jsx)(ex.A,{className:"h-4 w-4 text-destructive"})})]})},e.id))}),(0,a.jsxs)(ec.$,{variant:"outline",size:"sm",onClick:()=>{let e=`new-${Date.now()}`;k(t=>[...t,{id:e,shortcut:"",message:""}]),P(e)},children:[(0,a.jsx)(eg.A,{className:"h-4 w-4 mr-2"}),"添加回复"]})]})]}),(0,a.jsx)(ec.$,{onClick:z,children:"保存聊天设置"})]}),(0,a.jsx)(el,{value:"key",className:"p-1",children:(0,a.jsxs)("div",{className:"space-y-6 py-4",children:[(0,a.jsxs)(e_.Fc,{children:[(0,a.jsx)(ev.A,{className:"h-4 w-4"}),(0,a.jsx)(e_.XL,{children:"当前密钥信息"}),(0,a.jsx)(e_.TN,{children:(0,a.jsxs)("div",{className:"mt-2 space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"绑定坐席"}),(0,a.jsx)("span",{children:s.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"当前密钥"}),(0,a.jsx)("code",{className:"text-xs",children:i?.key})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"到期时间"}),(0,a.jsx)("span",{className:"font-semibold",children:(()=>{if(!i?.expiresAt)return"无到期限制";let e=(0,ej.H)(i.expiresAt);return e<new Date?"已过期":j(e,{addSuffix:!0,locale:b.g})})()})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eo.J,{htmlFor:"extend-key",children:"更换绑定密钥"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"粘贴一个新的、未绑定的坐席密钥来替换当前密钥，以继续使用坐席服务。旧密钥将会失效。"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(ed.p,{id:"extend-key",placeholder:"在此处粘贴新密钥",value:M,onChange:e=>R(e.target.value),disabled:h}),(0,a.jsxs)(ec.$,{onClick:O,disabled:h||!M,children:[h&&(0,a.jsx)(ey.A,{className:"animate-spin"}),"更换密钥"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eo.J,{children:"提醒"}),(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"到期提醒"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"在密钥到期前1小时，系统将弹出友好提示。"})]}),(0,a.jsx)(ez,{checked:C,onCheckedChange:A})]})]})]})})]})]})})}let eq=(0,N.A)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);var eO=s(92477);let eL=(0,N.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var eT=Object.defineProperty,eH=Object.getOwnPropertySymbols,eB=Object.prototype.hasOwnProperty,e$=Object.prototype.propertyIsEnumerable,eV=(e,t,s)=>t in e?eT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eU=(e,t)=>{for(var s in t||(t={}))eB.call(t,s)&&eV(e,s,t[s]);if(eH)for(var s of eH(t))e$.call(t,s)&&eV(e,s,t[s]);return e},eG=(e,t)=>{var s={};for(var r in e)eB.call(e,r)&&0>t.indexOf(r)&&(s[r]=e[r]);if(null!=e&&eH)for(var r of eH(e))0>t.indexOf(r)&&e$.call(e,r)&&(s[r]=e[r]);return s};(e=>{let t=class{constructor(e,s,r,n){if(this.version=e,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(n<-1||n>7)throw RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let e=0;e<this.size;e++)i.push(!1);for(let e=0;e<this.size;e++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();let l=this.addEccAndInterleave(r);if(this.drawCodewords(l),-1==n){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);let s=this.getPenaltyScore();s<e&&(n=t,e=s),this.applyMask(t)}}a(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}static encodeText(s,r){let a=e.QrSegment.makeSegments(s);return t.encodeSegments(a,r)}static encodeBinary(s,r){let a=e.QrSegment.makeBytes(s);return t.encodeSegments([a],r)}static encodeSegments(e,r,n=1,l=40,o=-1,d=!0){let c,u;if(!(t.MIN_VERSION<=n&&n<=l&&l<=t.MAX_VERSION)||o<-1||o>7)throw RangeError("Invalid value");for(c=n;;c++){let s=8*t.getNumDataCodewords(c,r),a=i.getTotalBits(e,c);if(a<=s){u=a;break}if(c>=l)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&u<=8*t.getNumDataCodewords(c,e)&&(r=e);let h=[];for(let t of e)for(let e of(s(t.mode.modeBits,4,h),s(t.numChars,t.mode.numCharCountBits(c),h),t.getData()))h.push(e);a(h.length==u);let m=8*t.getNumDataCodewords(c,r);a(h.length<=m),s(0,Math.min(4,m-h.length),h),s(0,(8-h.length%8)%8,h),a(h.length%8==0);for(let e=236;h.length<m;e^=253)s(e,8,h);let f=[];for(;8*f.length<h.length;)f.push(0);return h.forEach((e,t)=>f[t>>>3]|=e<<7-(7&t)),new t(c,r,f,o)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let s=0;s<t;s++)for(let r=0;r<t;r++)(0!=s||0!=r)&&(0!=s||r!=t-1)&&(s!=t-1||0!=r)&&this.drawAlignmentPattern(e[s],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,s=t;for(let e=0;e<10;e++)s=s<<1^(s>>>9)*1335;let n=(t<<10|s)^21522;a(n>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,r(n,e));this.setFunctionModule(8,7,r(n,6)),this.setFunctionModule(8,8,r(n,7)),this.setFunctionModule(7,8,r(n,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,r(n,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,r(n,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,r(n,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;a(t>>>18==0);for(let e=0;e<18;e++){let s=r(t,e),a=this.size-11+e%3,n=Math.floor(e/3);this.setFunctionModule(a,n,s),this.setFunctionModule(n,a,s)}}drawFinderPattern(e,t){for(let s=-4;s<=4;s++)for(let r=-4;r<=4;r++){let a=Math.max(Math.abs(r),Math.abs(s)),n=e+r,i=t+s;0<=n&&n<this.size&&0<=i&&i<this.size&&this.setFunctionModule(n,i,2!=a&&4!=a)}}drawAlignmentPattern(e,t){for(let s=-2;s<=2;s++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+s,1!=Math.max(Math.abs(r),Math.abs(s)))}setFunctionModule(e,t,s){this.modules[t][e]=s,this.isFunction[t][e]=!0}addEccAndInterleave(e){let s=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(s,r))throw RangeError("Invalid argument");let n=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][s],i=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][s],l=Math.floor(t.getNumRawDataModules(s)/8),o=n-l%n,d=Math.floor(l/n),c=[],u=t.reedSolomonComputeDivisor(i);for(let s=0,r=0;s<n;s++){let a=e.slice(r,r+d-i+(s<o?0:1));r+=a.length;let n=t.reedSolomonComputeRemainder(a,u);s<o&&a.push(0),c.push(a.concat(n))}let h=[];for(let e=0;e<c[0].length;e++)c.forEach((t,s)=>{(e!=d-i||s>=o)&&h.push(t[e])});return a(h.length==l),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let s=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let a=0;a<this.size;a++)for(let n=0;n<2;n++){let i=t-n,l=(t+1&2)==0?this.size-1-a:a;!this.isFunction[l][i]&&s<8*e.length&&(this.modules[l][i]=r(e[s>>>3],7-(7&s)),s++)}}a(s==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let s=0;s<this.size;s++){let r;switch(e){case 0:r=(s+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=s%3==0;break;case 3:r=(s+t)%3==0;break;case 4:r=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:r=s*t%2+s*t%3==0;break;case 6:r=(s*t%2+s*t%3)%2==0;break;case 7:r=((s+t)%2+s*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][s]&&r&&(this.modules[t][s]=!this.modules[t][s])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let r=!1,a=0,n=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[s][i]==r?5==++a?e+=t.PENALTY_N1:a>5&&e++:(this.finderPenaltyAddHistory(a,n),r||(e+=this.finderPenaltyCountPatterns(n)*t.PENALTY_N3),r=this.modules[s][i],a=1);e+=this.finderPenaltyTerminateAndCount(r,a,n)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let r=!1,a=0,n=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][s]==r?5==++a?e+=t.PENALTY_N1:a>5&&e++:(this.finderPenaltyAddHistory(a,n),r||(e+=this.finderPenaltyCountPatterns(n)*t.PENALTY_N3),r=this.modules[i][s],a=1);e+=this.finderPenaltyTerminateAndCount(r,a,n)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let r=0;r<this.size-1;r++){let a=this.modules[s][r];a==this.modules[s][r+1]&&a==this.modules[s+1][r]&&a==this.modules[s+1][r+1]&&(e+=t.PENALTY_N2)}let s=0;for(let e of this.modules)s=e.reduce((e,t)=>e+ +!!t,s);let r=this.size*this.size,n=Math.ceil(Math.abs(20*s-10*r)/r)-1;return a(0<=n&&n<=9),a(0<=(e+=n*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),s=[6];for(let r=this.size-7;s.length<e;r-=t)s.splice(1,0,r);return s}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let s=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;s-=(25*t-10)*t-55,e>=7&&(s-=36)}return a(208<=s&&s<=29648),s}static getNumDataCodewords(e,s){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let s=[];for(let t=0;t<e-1;t++)s.push(0);s.push(1);let r=1;for(let a=0;a<e;a++){for(let e=0;e<s.length;e++)s[e]=t.reedSolomonMultiply(s[e],r),e+1<s.length&&(s[e]^=s[e+1]);r=t.reedSolomonMultiply(r,2)}return s}static reedSolomonComputeRemainder(e,s){let r=s.map(e=>0);for(let a of e){let e=a^r.shift();r.push(0),s.forEach((s,a)=>r[a]^=t.reedSolomonMultiply(s,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let s=0;for(let r=7;r>=0;r--)s=s<<1^(s>>>7)*285^(t>>>r&1)*e;return a(s>>>8==0),s}finderPenaltyCountPatterns(e){let t=e[1];a(t<=3*this.size);let s=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(s&&e[0]>=4*t&&e[6]>=t?1:0)+(s&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,s){return e&&(this.finderPenaltyAddHistory(t,s),t=0),t+=this.size,this.finderPenaltyAddHistory(t,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function s(e,t,s){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let r=t-1;r>=0;r--)s.push(e>>>r&1)}function r(e,t){return(e>>>t&1)!=0}function a(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let n=class{constructor(e,t,s){if(this.mode=e,this.numChars=t,this.bitData=s,t<0)throw RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(e){let t=[];for(let r of e)s(r,8,t);return new n(n.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!n.isNumeric(e))throw RangeError("String contains non-numeric characters");let t=[];for(let r=0;r<e.length;){let a=Math.min(e.length-r,3);s(parseInt(e.substr(r,a),10),3*a+1,t),r+=a}return new n(n.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){let t;if(!n.isAlphanumeric(e))throw RangeError("String contains unencodable characters in alphanumeric mode");let r=[];for(t=0;t+2<=e.length;t+=2){let a=45*n.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));s(a+=n.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),11,r)}return t<e.length&&s(n.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,r),new n(n.Mode.ALPHANUMERIC,e.length,r)}static makeSegments(e){return""==e?[]:n.isNumeric(e)?[n.makeNumeric(e)]:n.isAlphanumeric(e)?[n.makeAlphanumeric(e)]:[n.makeBytes(n.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw RangeError("ECI assignment value out of range");if(e<128)s(e,8,t);else if(e<16384)s(2,2,t),s(e,14,t);else if(e<1e6)s(6,3,t),s(e,21,t);else throw RangeError("ECI assignment value out of range");return new n(n.Mode.ECI,0,t)}static isNumeric(e){return n.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return n.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let s=0;for(let r of e){let e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;s+=4+e+r.bitData.length}return s}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let s=0;s<e.length;s++)"%"!=e.charAt(s)?t.push(e.charCodeAt(s)):(t.push(parseInt(e.substr(s+1,2),16)),s+=2);return t}},i=n;i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=i})(r||(r={})),(e=>{(e=>{let t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(e.QrCode||(e.QrCode={}))})(r||(r={})),(e=>{(e=>{let t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(e.QrSegment||(e.QrSegment={}))})(r||(r={}));var eZ=r,eK={L:eZ.QrCode.Ecc.LOW,M:eZ.QrCode.Ecc.MEDIUM,Q:eZ.QrCode.Ecc.QUARTILE,H:eZ.QrCode.Ecc.HIGH},eX="#FFFFFF",eY="#000000";function eQ(e,t=0){let s=[];return e.forEach(function(e,r){let a=null;e.forEach(function(n,i){if(!n&&null!==a){s.push(`M${a+t} ${r+t}h${i-a}v1H${a+t}z`),a=null;return}if(i===e.length-1){if(!n)return;null===a?s.push(`M${i+t},${r+t} h1v1H${i+t}z`):s.push(`M${a+t},${r+t} h${i+1-a}v1H${a+t}z`);return}n&&null===a&&(a=i)})}),s.join("")}function eW(e,t){return e.slice().map((e,s)=>s<t.y||s>=t.y+t.h?e:e.map((e,s)=>(s<t.x||s>=t.x+t.w)&&e))}function eJ(e,t,s,r){if(null==r)return null;let a=e.length+4*!!s*2,n=Math.floor(.1*t),i=a/t,l=(r.width||n)*i,o=(r.height||n)*i,d=null==r.x?e.length/2-l/2:r.x*i,c=null==r.y?e.length/2-o/2:r.y*i,u=null;if(r.excavate){let e=Math.floor(d),t=Math.floor(c),s=Math.ceil(l+d-e),r=Math.ceil(o+c-t);u={x:e,y:t,w:s,h:r}}return{x:d,y:c,h:o,w:l,excavation:u}}var e0=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();function e1(e){let{value:t,size:s=128,level:r="L",bgColor:a=eX,fgColor:i=eY,includeMargin:l=!1,style:o,imageSettings:d}=e,c=eG(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),u=null==d?void 0:d.src,h=n.useRef(null),m=n.useRef(null),[f,p]=n.useState(!1);n.useEffect(()=>{if(null!=h.current){let e=h.current,n=e.getContext("2d");if(!n)return;let o=eZ.QrCode.encodeText(t,eK[r]).getModules(),c=4*!!l,u=o.length+2*c,f=eJ(o,s,l,d),p=m.current,x=null!=f&&null!==p&&p.complete&&0!==p.naturalHeight&&0!==p.naturalWidth;x&&null!=f.excavation&&(o=eW(o,f.excavation));let g=window.devicePixelRatio||1;e.height=e.width=s*g;let v=s/u*g;n.scale(v,v),n.fillStyle=a,n.fillRect(0,0,u,u),n.fillStyle=i,e0?n.fill(new Path2D(eQ(o,c))):o.forEach(function(e,t){e.forEach(function(e,s){e&&n.fillRect(s+c,t+c,1,1)})}),x&&n.drawImage(p,f.x+c,f.y+c,f.w,f.h)}}),n.useEffect(()=>{p(!1)},[u]);let x=eU({height:s,width:s},o),g=null;return null!=u&&(g=n.createElement("img",{src:u,key:u,style:{display:"none"},onLoad:()=>{p(!0)},ref:m})),n.createElement(n.Fragment,null,n.createElement("canvas",eU({style:x,height:s,width:s,ref:h},c)),g)}function e2(e){let{value:t,size:s=128,level:r="L",bgColor:a=eX,fgColor:i=eY,includeMargin:l=!1,imageSettings:o}=e,d=eG(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),c=eZ.QrCode.encodeText(t,eK[r]).getModules(),u=4*!!l,h=c.length+2*u,m=eJ(c,s,l,o),f=null;null!=o&&null!=m&&(null!=m.excavation&&(c=eW(c,m.excavation)),f=n.createElement("image",{xlinkHref:o.src,height:m.h,width:m.w,x:m.x+u,y:m.y+u,preserveAspectRatio:"none"}));let p=eQ(c,u);return n.createElement("svg",eU({height:s,width:s,viewBox:`0 0 ${h} ${h}`},d),n.createElement("path",{fill:a,d:`M0,0 h${h}v${h}H0z`,shapeRendering:"crispEdges"}),n.createElement("path",{fill:i,d:p,shapeRendering:"crispEdges"}),f)}var e4=e=>{let{renderAs:t}=e,s=eG(e,["renderAs"]);return"svg"===t?n.createElement(e2,eU({},s)):n.createElement(e1,eU({},s))},e3="Radio",[e8,e5]=(0,q.A)(e3),[e6,e7]=e8(e3),e9=n.forwardRef((e,t)=>{let{__scopeRadio:s,name:r,checked:i=!1,required:l,disabled:o,value:d="on",onCheck:c,form:u,...h}=e,[m,f]=n.useState(null),p=(0,eb.s)(t,e=>f(e)),x=n.useRef(!1),g=!m||u||!!m.closest("form");return(0,a.jsxs)(e6,{scope:s,checked:i,disabled:o,children:[(0,a.jsx)(T.sG.button,{type:"button",role:"radio","aria-checked":i,"data-state":tr(i),"data-disabled":o?"":void 0,disabled:o,value:d,...h,ref:p,onClick:(0,F.m)(e.onClick,e=>{i||c?.(),g&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),g&&(0,a.jsx)(ts,{control:m,bubbles:!x.current,name:r,value:d,checked:i,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});e9.displayName=e3;var te="RadioIndicator",tt=n.forwardRef((e,t)=>{let{__scopeRadio:s,forceMount:r,...n}=e,i=e7(te,s);return(0,a.jsx)(L.C,{present:r||i.checked,children:(0,a.jsx)(T.sG.span,{"data-state":tr(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})})});tt.displayName=te;var ts=e=>{let{control:t,checked:s,bubbles:r=!0,...i}=e,l=n.useRef(null),o=(0,eN.Z)(s),d=(0,ew.X)(t);return n.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&t){let a=new Event("click",{bubbles:r});t.call(e,s),e.dispatchEvent(a)}},[o,s,r]),(0,a.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function tr(e){return e?"checked":"unchecked"}var ta=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tn="RadioGroup",[ti,tl]=(0,q.A)(tn,[O.RG,e5]),to=(0,O.RG)(),td=e5(),[tc,tu]=ti(tn),th=n.forwardRef((e,t)=>{let{__scopeRadioGroup:s,name:r,defaultValue:n,value:i,required:l=!1,disabled:o=!1,orientation:d,dir:c,loop:u=!0,onValueChange:h,...m}=e,f=to(s),p=(0,H.jH)(c),[x,g]=(0,B.i)({prop:i,defaultProp:n,onChange:h});return(0,a.jsx)(tc,{scope:s,name:r,required:l,disabled:o,value:x,onValueChange:g,children:(0,a.jsx)(O.bL,{asChild:!0,...f,orientation:d,dir:p,loop:u,children:(0,a.jsx)(T.sG.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":o?"":void 0,dir:p,...m,ref:t})})})});th.displayName=tn;var tm="RadioGroupItem",tf=n.forwardRef((e,t)=>{let{__scopeRadioGroup:s,disabled:r,...i}=e,l=tu(tm,s),o=l.disabled||r,d=to(s),c=td(s),u=n.useRef(null),h=(0,eb.s)(t,u),m=l.value===i.value,f=n.useRef(!1);return n.useEffect(()=>{let e=e=>{ta.includes(e.key)&&(f.current=!0)},t=()=>f.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,a.jsx)(O.q7,{asChild:!0,...d,focusable:!o,active:m,children:(0,a.jsx)(e9,{disabled:o,required:l.required,checked:m,...c,...i,name:l.name,ref:h,onCheck:()=>l.onValueChange(i.value),onKeyDown:(0,F.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,F.m)(i.onFocus,()=>{f.current&&u.current?.click()})})})});tf.displayName=tm;var tp=n.forwardRef((e,t)=>{let{__scopeRadioGroup:s,...r}=e,n=td(s);return(0,a.jsx)(tt,{...n,...r,ref:t})});tp.displayName="RadioGroupIndicator";var tx=s(73256);let tg=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(th,{className:(0,h.cn)("grid gap-2",e),...t,ref:s}));tg.displayName=th.displayName;let tv=n.forwardRef(({className:e,...t},s)=>(0,a.jsx)(tf,{ref:s,className:(0,h.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,a.jsx)(tp,{className:"flex items-center justify-center",children:(0,a.jsx)(tx.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}));function ty({options:e,value:t,onValueChange:s,className:r}){return(0,a.jsx)(tg,{value:t,onValueChange:s,className:(0,h.cn)("grid w-full grid-cols-3 gap-2 rounded-lg bg-muted p-1",r),children:e.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)(tv,{value:e.value,id:e.value,className:"peer sr-only",disabled:e.disabled}),(0,a.jsxs)(eo.J,{htmlFor:e.value,className:(0,h.cn)("flex flex-col items-center justify-center rounded-md border-2 border-muted bg-muted p-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary","cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-50"),children:[e.icon&&(0,a.jsx)(e.icon,{className:"mb-1 h-5 w-5"}),e.label]})]},e.value))})}function tj({isOpen:e,setIsOpen:t}){let{user:s}=(0,c.n)(),{agent:r,shouldInvalidateAliases:i,aliasesInvalidated:l}=d(),{toast:o}=(0,eh.dj)(),[u,h]=(0,n.useState)(null),[m,f]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[g,v]=(0,n.useState)("none"),[y,j]=(0,n.useState)(null),b={id:"qr-code-canvas",value:m,size:192,level:"H",includeMargin:!0,...y&&{imageSettings:{src:y,height:35,width:35,excavate:!0}}};return(0,a.jsx)(_.lG,{open:e,onOpenChange:t,children:(0,a.jsxs)(_.Cf,{className:"max-w-md",children:[(0,a.jsxs)(_.c7,{children:[(0,a.jsx)(_.L3,{children:"分享您的聊天链接"}),(0,a.jsx)(_.rr,{children:"与访客分享此唯一链接或二维码，即可开始与您的专属聊天会话。链接有独立有效期，过期将自动失效。"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6 pt-4",children:[(0,a.jsx)("div",{className:"p-4 bg-white rounded-lg border",children:p||!m?(0,a.jsx)("div",{className:"h-[192px] w-[192px] bg-gray-200 animate-pulse rounded-md flex items-center justify-center",children:(0,a.jsx)(ey.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,a.jsx)(e4,{...b})}),(0,a.jsx)(ty,{value:g,onValueChange:e=>v(e),options:[{value:"none",label:"标准",icon:eq},{value:"icon",label:"图标",icon:M.A},{value:"avatar",label:"头像",icon:k.A,disabled:!r?.avatar}]}),(0,a.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,a.jsx)(ed.p,{value:m,placeholder:"正在生成链接...",readOnly:!0,className:"text-sm"}),(0,a.jsx)(ec.$,{variant:"outline",size:"icon",onClick:()=>{m&&(navigator.clipboard.writeText(m),o({title:"已复制！",description:"分享链接已复制到剪贴板。"}))},disabled:!m,children:(0,a.jsx)(eO.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(_.Es,{className:"sm:justify-center",children:(0,a.jsxs)(ec.$,{onClick:()=>{let e=document.getElementById("qr-code-canvas");if(e){let t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),s=document.createElement("a");s.href=t,s.download="agentverse-share-qr.png",document.body.appendChild(s),s.click(),document.body.removeChild(s),o({title:"已下载",description:"二维码已保存为PNG图片。"})}},disabled:!m,children:[(0,a.jsx)(eL,{className:"mr-2 h-4 w-4"}),"下载二维码"]})})]})})}function tb(){let{agent:e,updateStatus:t}=d(),{logout:s,user:r}=(0,c.n)(),[i,l]=(0,n.useState)(!1),[o,h]=(0,n.useState)(!1);return e&&r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(R.rI,{children:[(0,a.jsx)(R.ty,{asChild:!0,children:(0,a.jsxs)("div",{className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-muted cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(u.eu,{className:"h-10 w-10",children:[(0,a.jsx)(u.BK,{src:e.avatar}),(0,a.jsx)(u.q5,{children:e.name[0]})]}),(0,a.jsx)("span",{className:`absolute bottom-0 right-0 block h-2.5 w-2.5 rounded-full border-2 border-background ${(e=>{switch(e){case"online":return"bg-green-500";case"busy":return"bg-orange-500";case"offline":return"text-gray-500"}})(e.status)}`})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsx)("p",{className:"font-semibold truncate",children:e.name}),(0,a.jsx)("p",{className:"text-sm capitalize truncate",children:(e=>{switch(e){case"online":return"在线";case"busy":return"忙碌";case"offline":return"离线"}})(e.status)})]})]})}),(0,a.jsxs)(R.SQ,{className:"w-64",side:"top",align:"start",children:[(0,a.jsx)(R.lp,{children:"我的状态"}),(0,a.jsxs)(R.Hr,{value:e.status,onValueChange:s=>{t(e.id,s)},children:[(0,a.jsxs)(R.Ht,{value:"online",children:[(0,a.jsx)(E,{className:"mr-2 h-4 w-4 text-green-500"}),"在线"]}),(0,a.jsxs)(R.Ht,{value:"busy",children:[(0,a.jsx)(P,{className:"mr-2 h-4 w-4 text-orange-500"}),"忙碌"]}),(0,a.jsxs)(R.Ht,{value:"offline",children:[(0,a.jsx)(I,{className:"mr-2 h-4 w-4 text-gray-500"}),"离线"]})]}),(0,a.jsx)(R.mB,{}),(0,a.jsxs)(R._2,{onSelect:()=>h(!0),children:[(0,a.jsx)(S,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"分享聊天链接"})]}),(0,a.jsxs)(R._2,{onSelect:()=>l(!0),children:[(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"设置"})]}),(0,a.jsx)(R.mB,{}),(0,a.jsxs)(R._2,{onClick:s,children:[(0,a.jsx)(z.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"退出登录"})]})]})]}),(0,a.jsx)(eF,{isOpen:i,setIsOpen:l}),(0,a.jsx)(tj,{isOpen:o,setIsOpen:h})]}):null}tv.displayName=tf.displayName;var tN=s(13972);function tw(){let{sessions:e,customers:t,activeSessionId:s,setActiveSessionId:r,deleteCustomer:n,unarchiveSession:i}=d(),{toast:l}=(0,eh.dj)(),o=(e,t)=>{e.stopPropagation(),n(t),l({title:"客户已删除",description:"该客户及其对话已被移除。",variant:"destructive"})},c=(e,t)=>{e.stopPropagation(),i(t),l({title:"会话已恢复",description:"该会话已从归档中恢复。"})},m=e.filter(e=>"archived"!==e.status),f=e.filter(e=>"archived"===e.status),p=(e,n=!1)=>0===e.length?(0,a.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center text-muted-foreground text-center p-4",children:[(0,a.jsx)(w,{className:"h-12 w-12"}),(0,a.jsx)("p",{className:"mt-4 text-sm font-semibold",children:n?"没有已归档的会话":"没有待处理的会话"}),(0,a.jsx)("p",{className:"text-xs",children:n?"所有会话都在主列表中。":"祝您有美好的一天！"})]}):e.map(e=>{let i=t.find(t=>t.id===e.customerId),l=e.messages[e.messages.length-1];return i?(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{onClick:()=>r(e.id),className:(0,h.cn)("w-full text-left p-3 rounded-lg flex gap-3 items-center transition-colors",s===e.id?"bg-primary/10":"hover:bg-muted/50"),children:[(0,a.jsxs)(u.eu,{className:"h-12 w-12 border",children:[(0,a.jsx)(u.BK,{src:i.avatar}),(0,a.jsx)(u.q5,{children:(0,a.jsx)(k.A,{})}),"pending"===e.status&&(0,a.jsx)("div",{className:"absolute bottom-0 right-0 h-3 w-3 bg-accent rounded-full border-2 border-background"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,a.jsx)("p",{className:"font-semibold truncate",children:i.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground shrink-0",children:j(new Date(l.timestamp),{addSuffix:!0,locale:b.g})})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:"text"===l.type?l.text:`[${l.file.name}]`})]})]}),(0,a.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:n?(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground rounded-full",onClick:t=>c(t,e.id),children:(0,a.jsx)(C,{className:"h-5 w-5"})}):(0,a.jsxs)(tN.Lt,{children:[(0,a.jsx)(tN.tv,{asChild:!0,children:(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",className:(0,h.cn)("h-8 w-8 text-muted-foreground rounded-full relative overflow-hidden","bg-no-repeat bg-[length:200%_100%] bg-[100%_0]","hover:text-white transition-all duration-300","hover:bg-[0%_0%] hover:bg-destructive/80"),children:(0,a.jsx)(A,{className:"h-5 w-5"})})}),(0,a.jsxs)(tN.EO,{children:[(0,a.jsxs)(tN.wd,{children:[(0,a.jsx)(tN.r7,{children:"您确定要删除该客户吗？"}),(0,a.jsx)(tN.$v,{children:"此操作无法撤销。这将会永久删除该客户及其所有对话历史。"})]}),(0,a.jsxs)(tN.ck,{children:[(0,a.jsx)(tN.Zr,{children:"取消"}),(0,a.jsx)(tN.Rx,{onClick:e=>o(e,i.id),className:"bg-destructive hover:bg-destructive/90",children:"删除"})]})]})]})})]},e.id):null});return(0,a.jsxs)("aside",{className:"w-80 border-r bg-muted/20 flex flex-col h-full",children:[(0,a.jsxs)(Y,{defaultValue:"conversations",className:"flex-1 flex flex-col min-h-0",children:[(0,a.jsx)("div",{className:"p-3 border-b flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-primary-foreground shrink-0",children:(0,a.jsx)(M.A,{size:24})}),(0,a.jsxs)(en,{className:"grid w-full grid-cols-2 h-10",children:[(0,a.jsx)(ei,{value:"conversations",children:"会话"}),(0,a.jsx)(ei,{value:"archived",children:"归档"})]})]})}),(0,a.jsx)(el,{value:"conversations",className:"flex-1 min-h-0 flex flex-col",children:(0,a.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,a.jsx)("div",{className:"p-2 space-y-1",children:p(m)})})}),(0,a.jsx)(el,{value:"archived",className:"flex-1 min-h-0 flex flex-col",children:(0,a.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,a.jsx)("div",{className:"p-2 space-y-1",children:p(f,!0)})})})]}),(0,a.jsx)("div",{className:"p-2 border-t mt-auto flex-shrink-0",children:(0,a.jsx)(tb,{})})]})}let tk=(0,N.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),tC=(0,N.A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),tA=(0,N.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),tM=(0,N.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),tR=(0,N.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),tE=(0,N.A)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),tP=(0,N.A)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),tI=(0,N.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),tS=(0,N.A)("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]),tD=(0,N.A)("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]),tz=(0,N.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var t_=s(24555),tF=s(85866),tq=s(46881),tO=s(42692),tL=s(52260),tT=s(31355),tH=s(1359),tB=s(32547),t$=s(55509),tV=s(25028),tU=n.forwardRef((e,t)=>{let{children:s,...r}=e,i=n.Children.toArray(s),l=i.find(tK);if(l){let e=l.props.children,s=i.map(t=>t!==l?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(tG,{...r,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return(0,a.jsx)(tG,{...r,ref:t,children:s})});tU.displayName="Slot";var tG=n.forwardRef((e,t)=>{let{children:s,...r}=e;if(n.isValidElement(s)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(s=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s),a=function(e,t){let s={...t};for(let r in t){let a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?s[r]=(...e)=>{n(...e),a(...e)}:a&&(s[r]=a):"style"===r?s[r]={...a,...n}:"className"===r&&(s[r]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==n.Fragment&&(a.ref=t?(0,eb.t)(t,e):e),n.cloneElement(s,a)}return n.Children.count(s)>1?n.Children.only(null):null});tG.displayName="SlotClone";var tZ=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});function tK(e){return n.isValidElement(e)&&e.type===tZ}var tX=s(63376),tY=s(42247),tQ="Popover",[tW,tJ]=(0,q.A)(tQ,[t$.Bk]),t0=(0,t$.Bk)(),[t1,t2]=tW(tQ),t4=e=>{let{__scopePopover:t,children:s,open:r,defaultOpen:i,onOpenChange:l,modal:o=!1}=e,d=t0(t),c=n.useRef(null),[u,h]=n.useState(!1),[m=!1,f]=(0,B.i)({prop:r,defaultProp:i,onChange:l});return(0,a.jsx)(t$.bL,{...d,children:(0,a.jsx)(t1,{scope:t,contentId:(0,$.B)(),triggerRef:c,open:m,onOpenChange:f,onOpenToggle:n.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:u,onCustomAnchorAdd:n.useCallback(()=>h(!0),[]),onCustomAnchorRemove:n.useCallback(()=>h(!1),[]),modal:o,children:s})})};t4.displayName=tQ;var t3="PopoverAnchor";n.forwardRef((e,t)=>{let{__scopePopover:s,...r}=e,i=t2(t3,s),l=t0(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:d}=i;return n.useEffect(()=>(o(),()=>d()),[o,d]),(0,a.jsx)(t$.Mz,{...l,...r,ref:t})}).displayName=t3;var t8="PopoverTrigger",t5=n.forwardRef((e,t)=>{let{__scopePopover:s,...r}=e,n=t2(t8,s),i=t0(s),l=(0,eb.s)(t,n.triggerRef),o=(0,a.jsx)(T.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":sl(n.open),...r,ref:l,onClick:(0,F.m)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:(0,a.jsx)(t$.Mz,{asChild:!0,...i,children:o})});t5.displayName=t8;var t6="PopoverPortal",[t7,t9]=tW(t6,{forceMount:void 0}),se=e=>{let{__scopePopover:t,forceMount:s,children:r,container:n}=e,i=t2(t6,t);return(0,a.jsx)(t7,{scope:t,forceMount:s,children:(0,a.jsx)(L.C,{present:s||i.open,children:(0,a.jsx)(tV.Z,{asChild:!0,container:n,children:r})})})};se.displayName=t6;var st="PopoverContent",ss=n.forwardRef((e,t)=>{let s=t9(st,e.__scopePopover),{forceMount:r=s.forceMount,...n}=e,i=t2(st,e.__scopePopover);return(0,a.jsx)(L.C,{present:r||i.open,children:i.modal?(0,a.jsx)(sr,{...n,ref:t}):(0,a.jsx)(sa,{...n,ref:t})})});ss.displayName=st;var sr=n.forwardRef((e,t)=>{let s=t2(st,e.__scopePopover),r=n.useRef(null),i=(0,eb.s)(t,r),l=n.useRef(!1);return n.useEffect(()=>{let e=r.current;if(e)return(0,tX.Eq)(e)},[]),(0,a.jsx)(tY.A,{as:tU,allowPinchZoom:!0,children:(0,a.jsx)(sn,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,F.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),l.current||s.triggerRef.current?.focus()}),onPointerDownOutside:(0,F.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;l.current=2===t.button||s},{checkForDefaultPrevented:!1}),onFocusOutside:(0,F.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),sa=n.forwardRef((e,t)=>{let s=t2(st,e.__scopePopover),r=n.useRef(!1),i=n.useRef(!1);return(0,a.jsx)(sn,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||s.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let a=t.target;s.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),sn=n.forwardRef((e,t)=>{let{__scopePopover:s,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:u,...h}=e,m=t2(st,s),f=t0(s);return(0,tH.Oh)(),(0,a.jsx)(tB.n,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:i,children:(0,a.jsx)(tT.qW,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:(0,a.jsx)(t$.UC,{"data-state":sl(m.open),role:"dialog",id:m.contentId,...f,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),si="PopoverClose";function sl(e){return e?"open":"closed"}n.forwardRef((e,t)=>{let{__scopePopover:s,...r}=e,n=t2(si,s);return(0,a.jsx)(T.sG.button,{type:"button",...r,ref:t,onClick:(0,F.m)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=si,n.forwardRef((e,t)=>{let{__scopePopover:s,...r}=e,n=t0(s);return(0,a.jsx)(t$.i3,{...n,...r,ref:t})}).displayName="PopoverArrow";let so=n.forwardRef(({className:e,align:t="center",sideOffset:s=4,...r},n)=>(0,a.jsx)(se,{children:(0,a.jsx)(ss,{ref:n,align:t,sideOffset:s,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));so.displayName=ss.displayName;var sd=s(58450);let sc=(0,N.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),su=({progress:e,size:t=40,strokeWidth:s=4,className:r})=>{let n=(t-s)/2,i=2*Math.PI*n;return(0,a.jsxs)("div",{className:(0,h.cn)("relative flex items-center justify-center",r),style:{width:t,height:t},children:[(0,a.jsxs)("svg",{width:t,height:t,viewBox:`0 0 ${t} ${t}`,className:"transform -rotate-90",children:[(0,a.jsx)("circle",{className:"text-muted",stroke:"currentColor",strokeWidth:s,fill:"transparent",r:n,cx:t/2,cy:t/2}),(0,a.jsx)("circle",{className:"text-primary",stroke:"currentColor",strokeWidth:s,strokeDasharray:i,strokeDashoffset:i-e/100*i,strokeLinecap:"round",fill:"transparent",r:n,cx:t/2,cy:t/2,style:{transition:"stroke-dashoffset 0.3s ease-in-out"}})]}),(0,a.jsx)("div",{className:"absolute",children:e>=100?(0,a.jsx)(sd.A,{className:"h-5 w-5 text-primary"}):(0,a.jsx)(sc,{className:"h-5 w-5 text-muted-foreground"})})]})};var sh=s(67146),sm=s(44493);let sf=(0,N.A)("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]);function sp(){let{settings:e,sendMessage:t,activeSessionId:s}=d();if(!e)return null;let{quickReplies:r}=e,n=e=>{s&&t(s,{type:"text",text:e})};return(0,a.jsx)("div",{className:"h-full flex flex-col",children:(0,a.jsx)("div",{className:"flex-1 p-0",children:(0,a.jsx)(tO.F,{className:"h-full",children:(0,a.jsx)("div",{className:"space-y-2",children:r.length>0?(0,a.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-background rounded-md border text-sm group relative",children:[(0,a.jsx)("code",{className:"font-medium text-primary bg-primary/10 px-1.5 py-0.5 rounded",children:e.shortcut}),(0,a.jsx)("p",{className:"text-muted-foreground pr-8 mt-1",children:e.message}),(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",className:"absolute top-1/2 right-2 -translate-y-1/2 h-8 w-8 text-muted-foreground opacity-0 group-hover:opacity-100",onClick:()=>n(e.message),disabled:!s,children:(0,a.jsx)(tF.A,{className:"h-4 w-4"})})]},e.id))}):(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-10",children:[(0,a.jsx)(sf,{className:"h-10 w-10 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"没有可用的快捷回复。"}),(0,a.jsx)("p",{className:"text-xs",children:"您可以在设置中添加。"})]})})})})})}let sx=["\uD83D\uDE00","\uD83D\uDE02","\uD83D\uDE0A","\uD83D\uDE0D","\uD83E\uDD14","\uD83D\uDE22","\uD83D\uDE20","\uD83D\uDE2E","\uD83D\uDC4D","\uD83D\uDC4E","❤️","\uD83D\uDC94","\uD83C\uDF89","\uD83D\uDD25","\uD83D\uDE4F","\uD83D\uDE4C","\uD83D\uDC4F","\uD83D\uDCAA","\uD83D\uDCAF","✨","✅","❌","❓","\uD83D\uDCA1"];function sg({session:e,customer:t}){let{agent:s,sendMessage:r,settings:i,sendFileMessage:l,blockCustomer:o,unblockCustomer:c,archiveSession:m}=d(),[f,p]=(0,n.useState)(""),[x,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),j=(0,n.useRef)(null),N=(0,n.useRef)(null),C=(0,n.useRef)(null),{toast:A}=(0,eh.dj)(),M=!!t?.ipAddress&&i?.blockedIps.includes(t.ipAddress),R=e?.status==="archived",E=[{icon:tk,label:"IP 地址",value:t.ipAddress},{icon:tC,label:"设备",value:t.device},{icon:tA,label:"位置",value:t.location},{icon:tM,label:"首次访问",value:(0,tq.GP)(new Date(t.firstSeen),"PPP",{locale:b.g})}],P=async()=>{f.trim()&&!M&&(await r(e.id,{type:"text",text:f}),p(""))},I=async()=>{if(f.trim()){g(!0);try{let e=await (0,tL.K)({message:f});p(e.redactedMessage)}catch(e){console.error("Failed to redact message:",e),A({title:"处理失败",description:"无法处理您的消息。",variant:"destructive"})}finally{g(!1)}}},S=e=>{p(t=>t+e)},D=e=>{"file"===e?N.current?.click():C.current?.click()},z=t=>{let r=t.target.files?.[0];r&&s&&l(e.id,r),t.target.value=""},_=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return t&&s?(0,a.jsx)("main",{className:"flex flex-1",children:(0,a.jsxs)("div",{className:"flex-1 flex flex-col h-full bg-background",children:[(0,a.jsxs)("header",{className:"p-4 border-b flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(u.eu,{children:[(0,a.jsx)(u.BK,{src:t.avatar}),(0,a.jsx)(u.q5,{children:(0,a.jsx)(k.A,{})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-semibold text-lg",children:t.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["会话开始于: ",(0,tq.GP)(new Date(e.createdAt),"PPP HH:mm",{locale:b.g})]})]})]}),(0,a.jsxs)(sh.cj,{children:[(0,a.jsx)(sh.CG,{asChild:!0,children:(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(k.A,{className:"h-5 w-5 text-muted-foreground"})})}),(0,a.jsxs)(sh.h,{className:"w-[400px] sm:w-[540px] p-0 flex flex-col",children:[(0,a.jsxs)(sh.Fm,{className:"p-6 pb-0",children:[(0,a.jsx)(sh.qp,{children:"客户详情"}),(0,a.jsx)(sh.Qs,{children:"查看客户信息，使用快捷回复，或执行操作。"})]}),(0,a.jsxs)("aside",{className:"p-6 flex flex-col gap-6 h-full overflow-y-auto",children:[R&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-background/80 z-10 flex flex-col items-center justify-center text-center p-4",children:[(0,a.jsx)(w,{className:"h-10 w-10 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"font-semibold text-lg",children:"会话已归档"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"您可以从归档列表中恢复此会话。"})]}),(0,a.jsxs)("div",{className:"text-center flex flex-col items-center flex-shrink-0",children:[(0,a.jsxs)(u.eu,{className:"h-24 w-24 border-2 border-primary mb-4",children:[(0,a.jsx)(u.BK,{src:t.avatar}),(0,a.jsx)(u.q5,{children:t.name[0]})]}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:t.name})]}),(0,a.jsxs)(Y,{defaultValue:"info",className:"flex-1 flex flex-col min-h-0",children:[(0,a.jsxs)(en,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(ei,{value:"info",children:"客户信息"}),(0,a.jsx)(ei,{value:"replies",children:"快捷回复"})]}),(0,a.jsx)(el,{value:"info",className:"flex-1 mt-4 min-h-0",children:(0,a.jsx)(tO.F,{className:"h-full",children:(0,a.jsxs)("div",{className:"flex flex-col gap-6 pr-4",children:[(0,a.jsxs)(sm.Zp,{children:[(0,a.jsx)(sm.aR,{children:(0,a.jsx)(sm.ZB,{className:"text-base",children:"客户信息"})}),(0,a.jsx)(sm.Wu,{className:"space-y-4",children:E.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,a.jsx)(e.icon,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:e.label}),(0,a.jsx)("p",{className:"font-medium",children:e.value})]})]},e.label))})]}),(0,a.jsxs)(sm.Zp,{children:[(0,a.jsx)(sm.aR,{children:(0,a.jsx)(sm.ZB,{className:"text-base",children:"会话历史"})}),(0,a.jsx)(sm.Wu,{children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"没有与该客户的过往会话。"})})]})]})})}),(0,a.jsx)(el,{value:"replies",className:"flex-1 mt-4 min-h-0",children:(0,a.jsx)(sp,{})})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2",children:[(0,a.jsxs)(ec.$,{variant:"outline",className:(0,h.cn)("flex-1",M&&"bg-yellow-400 hover:bg-yellow-500 text-black"),onClick:()=>{if(!t.ipAddress)return void A({title:"操作失败",description:"该客户没有IP地址，无法拉黑。",variant:"destructive"});M?(c(t.ipAddress),A({title:"客户已解除拉黑"})):(o(t.ipAddress),A({title:"客户已被拉黑",description:"您将不会再收到该IP地址的消息。"}))},disabled:!t.ipAddress,children:[M?(0,a.jsx)(tR,{className:"mr-2"}):(0,a.jsx)(tE,{className:"mr-2"}),M?"解除":"拉黑"]}),(0,a.jsxs)(ec.$,{variant:"outline",className:"flex-1",onClick:()=>{e.id&&(m(e.id),A({title:"会话已归档"}))},children:[(0,a.jsx)(w,{className:"mr-2"}),"归档"]})]})]})]})]})]}),(0,a.jsx)(tO.F,{className:"flex-1",ref:j,children:(0,a.jsx)("div",{className:"p-6 space-y-6",children:e.messages.map(e=>(0,a.jsxs)("div",{className:(0,h.cn)("flex items-end gap-3","agent"===e.sender&&"justify-end"),children:["customer"===e.sender&&(0,a.jsxs)(u.eu,{className:"h-8 w-8",children:[(0,a.jsx)(u.BK,{src:t.avatar}),(0,a.jsx)(u.q5,{children:(0,a.jsx)(k.A,{})})]}),(0,a.jsxs)("div",{className:(0,h.cn)("max-w-md p-3 rounded-2xl","agent"===e.sender?"bg-primary text-primary-foreground rounded-br-none":"bg-muted rounded-bl-none"),children:["text"===e.type?(0,a.jsx)("p",{className:"text-sm",children:e.text}):(0,a.jsxs)("a",{href:e.file.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3",children:[(0,a.jsx)(su,{progress:e.file.progress}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium break-all underline",children:e.file.name}),(0,a.jsx)("p",{className:(0,h.cn)("text-xs","agent"===e.sender?"text-primary-foreground/80":"text-muted-foreground"),children:_(e.file.size)})]})]}),(0,a.jsx)("p",{className:(0,h.cn)("text-xs mt-1 text-right","agent"===e.sender?"text-primary-foreground/70":"text-muted-foreground/70"),children:(0,tq.GP)(new Date(e.timestamp),"HH:mm",{locale:b.g})})]}),"agent"===e.sender&&(0,a.jsxs)(u.eu,{className:"h-8 w-8",children:[(0,a.jsx)(u.BK,{src:s.avatar}),(0,a.jsx)(u.q5,{children:s.name[0]})]})]},e.id))})}),(0,a.jsx)("footer",{className:"p-4 border-t",children:(0,a.jsxs)("div",{className:"relative",children:[M&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-background/80 z-10 flex flex-col items-center justify-center rounded-lg",children:[(0,a.jsx)(tE,{className:"h-8 w-8 text-destructive mb-2"}),(0,a.jsx)("p",{className:"font-semibold",children:"用户已被拉黑"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"您无法向该用户发送消息。"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(t4,{children:[(0,a.jsx)(t5,{asChild:!0,children:(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",className:"text-muted-foreground",children:(0,a.jsx)(tP,{})})}),(0,a.jsx)(so,{className:"w-auto p-2",children:(0,a.jsx)("div",{className:"grid grid-cols-6 gap-2",children:sx.map(e=>(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",onClick:()=>S(e),children:e},e))})})]}),(0,a.jsxs)(ec.$,{variant:"ghost",size:"icon",className:(0,h.cn)("text-muted-foreground",v&&"text-red-500 bg-red-500/10"),onClick:()=>{y(!v),A({title:v?"录音已停止":"开始录音...",description:"语音输入功能正在开发中。"})},children:[(0,a.jsx)(tI,{}),v&&(0,a.jsx)(tS,{className:"absolute -top-1 -right-1 text-red-500 animate-ping"})]}),(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",className:"text-muted-foreground",onClick:()=>D("file"),children:(0,a.jsx)(tD,{})}),(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",className:"text-muted-foreground",onClick:()=>D("image"),children:(0,a.jsx)(tz,{})}),(0,a.jsx)("input",{type:"file",ref:N,onChange:z,className:"hidden"}),(0,a.jsx)("input",{type:"file",accept:"image/*",ref:C,onChange:z,className:"hidden"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eu.T,{placeholder:"输入您的消息...",className:"pr-32",rows:4,value:f,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},disabled:M}),(0,a.jsxs)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[(0,a.jsx)(ec.$,{variant:"ghost",size:"icon",onClick:I,disabled:x||!f||M,children:x?(0,a.jsx)(ey.A,{className:"h-5 w-5 animate-spin"}):(0,a.jsx)(t_.A,{className:"h-5 w-5 text-muted-foreground"})}),(0,a.jsxs)(ec.$,{onClick:P,disabled:!f||M,children:[(0,a.jsx)(tF.A,{className:"h-4 w-4 mr-2"}),"发送"]})]})]})]})]})})]})}):null}var sv=s(85726);let sy=(0,N.A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);function sj(){let{user:e}=(0,c.n)(),{fetchAgentData:t,isLoading:s,activeSessionId:r,sessions:n,customers:i,agent:l}=d();if(s&&!l)return(0,a.jsx)(sb,{});let o=n.find(e=>e.id===r),u=i.find(e=>e.id===o?.customerId);return(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)(tw,{}),o&&u?(0,a.jsx)(sg,{session:o,customer:u}):(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-muted-foreground bg-muted/30",children:[(0,a.jsx)(sy,{size:48,className:"mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"无有效对话"}),(0,a.jsx)("p",{children:"从列表中选择一个对话开始。"})]})]})}function sb(){return(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsxs)("div",{className:"w-80 border-r p-2 flex flex-col gap-2",children:[(0,a.jsx)(sv.E,{className:"h-10 w-full"}),(0,a.jsx)(sv.E,{className:"h-16 w-full"}),(0,a.jsx)(sv.E,{className:"h-16 w-full"}),(0,a.jsx)(sv.E,{className:"h-16 w-full opacity-50"}),(0,a.jsx)(sv.E,{className:"h-16 w-full opacity-50"})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)(sv.E,{className:"h-8 w-48"})}),(0,a.jsxs)("div",{className:"flex-1 p-4 space-y-4",children:[(0,a.jsx)(sv.E,{className:"h-12 w-3/4"}),(0,a.jsx)(sv.E,{className:"h-12 w-1/2 ml-auto"}),(0,a.jsx)(sv.E,{className:"h-16 w-2/3"})]}),(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsx)(sv.E,{className:"h-20 w-full"})})]})]})}},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29523:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>o});var r=s(60687),a=s(43210),n=s(11329),i=s(24224),l=s(4780);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},d)=>{let c=a?n.DX:"button";return(0,r.jsx)(c,{className:(0,l.cn)(o({variant:t,size:s,className:e})),ref:d,...i})});d.displayName="Button"},32584:(e,t,s)=>{"use strict";s.d(t,{BK:()=>o,eu:()=>l,q5:()=>d});var r=s(60687),a=s(43210),n=s(92951),i=s(4780);let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));l.displayName=n.bL.displayName;let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",e),...t}));o.displayName=n._V.displayName;let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));d.displayName=n.H4.displayName},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34729:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var r=s(60687),a=s(43210),n=s(4780);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));i.displayName="Textarea"},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},42692:(e,t,s)=>{"use strict";s.d(t,{F:()=>l});var r=s(60687),a=s(43210),n=s(68123),i=s(4780);let l=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(n.bL,{ref:a,className:(0,i.cn)("relative overflow-hidden",e),...s,children:[(0,r.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(o,{}),(0,r.jsx)(n.OK,{})]}));l.displayName=n.bL.displayName;let o=a.forwardRef(({className:e,orientation:t="vertical",...s},a)=>(0,r.jsx)(n.VM,{ref:a,orientation:t,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:(0,r.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=n.VM.displayName},44493:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var r=s(60687),a=s(43210),n=s(4780);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},44708:e=>{"use strict";e.exports=require("node:https")},47002:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=47002,e.exports=t},47963:(e,t,s)=>{Promise.resolve().then(s.bind(s,16771))},52260:(e,t,s)=>{"use strict";s.d(t,{K:()=>a});var r=s(6475);let a=(0,r.createServerReference)("40d30e3a1792cc9304fff640b81b834a4ac242f851",r.callServer,void 0,r.findSourceMapURL,"redactPii")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(65239),a=s(48088),n=s(88170),i=s.n(n),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["agent",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5750)),"/home/user/studio/src/app/agent/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,73777)),"/home/user/studio/src/app/agent/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/agent/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/agent/page",pathname:"/agent",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},58579:(e,t,s)=>{Promise.resolve().then(s.bind(s,28784))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67146:(e,t,s)=>{"use strict";s.d(t,{CG:()=>c,Fm:()=>p,Qs:()=>g,cj:()=>d,h:()=>f,qp:()=>x});var r=s(60687),a=s(43210),n=s(10991),i=s(24224),l=s(78726),o=s(4780);let d=n.bL,c=n.l9;n.bm;let u=n.ZL,h=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));h.displayName=n.hJ.displayName;let m=(0,i.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=a.forwardRef(({side:e="right",className:t,children:s,...a},i)=>(0,r.jsxs)(u,{children:[(0,r.jsx)(h,{}),(0,r.jsxs)(n.UC,{ref:i,className:(0,o.cn)(m({side:e}),t),...a,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=n.UC.displayName;let p=({className:e,...t})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});p.displayName="SheetHeader";let x=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold text-foreground",e),...t}));x.displayName=n.hE.displayName;let g=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));g.displayName=n.VY.displayName},69038:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"40d30e3a1792cc9304fff640b81b834a4ac242f851":()=>c});var r=s(91199);s(42087);var a=s(37612),n=s(9203);let i=(0,a.genkit)({plugins:[(0,n.YF)()],model:"googleai/gemini-2.0-flash"});var l=s(33331);let o=a.z.object({message:a.z.string().describe("The customer message to redact PII from.")}),d=a.z.object({redactedMessage:a.z.string().describe("The message with PII redacted.")});async function c(e){return h(e)}let u=i.definePrompt({name:"redactPiiPrompt",input:{schema:o},output:{schema:d},prompt:`You are an AI assistant specializing in redacting personally identifiable information (PII) from customer messages.

  Your task is to analyze the given message and redact any PII, such as names, email addresses, phone numbers, social security numbers, credit card numbers, addresses, and other sensitive information.
  Replace the PII with a placeholder like "[REDACTED]" or a similar marker.

  Message: {{{message}}}
  `}),h=i.defineFlow({name:"redactPiiFlow",inputSchema:o,outputSchema:d},async e=>{let{output:t}=await u(e);return t});(0,l.D)([c]),(0,r.A)(c,"40d30e3a1792cc9304fff640b81b834a4ac242f851",null)},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},73777:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(37413),a=s(16771);function n({children:e}){return(0,r.jsx)("div",{className:"h-screen w-screen overflow-hidden bg-background",children:(0,r.jsx)(a.AgentUI,{})})}},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},85726:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(60687),a=s(4780);function n({className:e,...t}){return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},89667:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(60687),a=s(43210),n=s(4780);let i=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},91821:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>o,TN:()=>c,XL:()=>d});var r=s(60687),a=s(43210),n=s(24224),i=s(4780);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef(({className:e,variant:t,...s},a)=>(0,r.jsx)("div",{ref:a,role:"alert",className:(0,i.cn)(l({variant:t}),e),...s}));o.displayName="Alert";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));d.displayName="AlertTitle";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,40,30,409,971,105,875,778],()=>s(56354));module.exports=r})();